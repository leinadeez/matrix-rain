<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Matrix Rain</title>
  </head>
  <body>
      <table cellpadding="0" cellspacing="0" id="tabela">      
      </table>
  </body>
    <script>
        const totalColunas = 10
        const totalLinhas = 10 // Min: 5, se tiver linhas demais vai ficar bem lento
        const delay = 100 // NÃ£o precisa ser igual ao delay, mas fica melhor se for.
        const speed = 100

        const create = element => document.createElement(element)        
        const selector = selector => document.querySelector(selector)
        
        let linha = create("tr")

        for (let j = 0; j < totalColunas; j++) {                
            const celula = create("td")         
            linha.appendChild(celula)
        }

        for (let i = 0; i < totalLinhas; i++) {
            const novaLinha = linha.cloneNode(true)
            novaLinha.id = `row${i}`
            selector(`#tabela`).appendChild(novaLinha)   
        }

        const column = (coluna) => {
            let y = 0
            const blabla = setInterval(() => {   
                switch(y) {
                    case 0: 
                        alpha(coluna,y,100)
                    break;
                    case 1: 
                        alpha(coluna,y,100)
                        alpha(coluna,y,80)
                    break;
                    case 2: 
                        alpha(coluna,y,100)
                        alpha(coluna,y,80)
                        alpha(coluna,y,60)
                    break;
                    case 3: 
                        alpha(coluna,y,100)
                        alpha(coluna,y,80)
                        alpha(coluna,y,60)
                        alpha(coluna,y,40)
                    break;
                    case 4: 
                        alpha(coluna,y,100)
                        alpha(coluna,y,80)
                        alpha(coluna,y,60)
                        alpha(coluna,y,40)
                        alpha(coluna,y,20)
                    break;
                    case totalLinhas:
                        alpha(coluna,y,80)
                        alpha(coluna,y,60)
                        alpha(coluna,y,40)
                        alpha(coluna,y,20)
                        alpha(coluna,y,0)
                    break;
                    case totalLinhas+1:
                        alpha(coluna,y,60)
                        alpha(coluna,y,40)
                        alpha(coluna,y,20)
                        alpha(coluna,y,0)
                    break;
                    case totalLinhas+2:
                        alpha(coluna,y,40)
                        alpha(coluna,y,20)
                        alpha(coluna,y,0)
                    break;
                    case totalLinhas+3:
                        alpha(coluna,y,20)
                        alpha(coluna,y,0)
                    break;
                    case totalLinhas+4:
                        alpha(coluna,y,0)
                    break;
                    default:
                        alpha(coluna,y,100)
                        alpha(coluna,y,80)
                        alpha(coluna,y,60)
                        alpha(coluna,y,40)
                        alpha(coluna,y,20)
                        alpha(coluna,y,0)
                }         
                y++         
                if (y >= totalLinhas+5) {
                    clearInterval(blabla)
                }   
            }, speed) 
        }

        const alpha = (indexX, indexY, value) => {
            const subtractor = (() => {
                switch(value) {
                    case 100:
                        return '0'
                    case 80:
                        return '1'
                    case 60: 
                        return '2'
                    case 40:
                        return '3'
                    case 20:
                        return '4'
                    default:
                        return '5'
                }
            })()  
            document.querySelector(`#row${indexY-subtractor}`).children[indexX].className = value === 0 ? '' : `alpha${value}`
        }
               
        setInterval(() => {
            var x = Math.floor(Math.random()* totalColunas)
            column(x)
        }, delay)
        
    </script>
  <style>
    body { 
        background-color: black;
    }
    table {
        border: 0
    }
    table tr td {
        width: 20px;
        height: 20px;
        background-color: #00ff00;
        opacity: 0;
    }
    .alpha100 {
        opacity: 1;
    }
    .alpha80 {
        opacity: 0.8;
    }
    .alpha60 {
        opacity: 0.6;
    }
    .alpha40 {
        opacity: 0.4;
    }
    .alpha20 {
        opacity: 0.2;
    }
  </style>
    
</html>
