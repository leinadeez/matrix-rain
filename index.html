<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Matrix Rain</title>
  </head>
  <body>
      <table cellpadding="0" cellspacing="0" id="tabela">      
      </table>
  </body>
    <script>
        const totalColunas = 10
        const totalLinhas = 10 // Min: 5, se tiver linhas demais vai ficar bem lento
        const delay = 100 // NÃ£o precisa ser igual ao delay, mas fica melhor se for.
        const speed = 100

        const create = element => document.createElement(element)        
        const selector = selector => document.querySelector(selector)

        for (let i = 0; i < totalLinhas; i++) {
            const linha = create("tr")
            linha.id = `row${i}`
            selector(`#tabela`).appendChild(linha)
            for (let j = 0; j < totalColunas; j++) {                
                const celula = create("td")         
                selector(`#row${i}`).appendChild(celula)
            }
        }

        const column = (coluna) => {
            let y = 0
            const blabla = setInterval(() => {   
                switch(y) {
                    case 0: 
                        alpha100(coluna,y)
                    break;
                    case 1: 
                        alpha100(coluna,y)
                        alpha80(coluna,y)
                    break;
                    case 2: 
                        alpha100(coluna,y)
                        alpha80(coluna,y)
                        alpha60(coluna,y)
                    break;
                    case 3: 
                        alpha100(coluna,y)
                        alpha80(coluna,y)
                        alpha60(coluna,y)
                        alpha40(coluna,y)
                    break;
                    case 4: 
                        alpha100(coluna,y)
                        alpha80(coluna,y)
                        alpha60(coluna,y)
                        alpha40(coluna,y)
                        alpha20(coluna,y)
                    break;
                    case totalLinhas:
                        alpha80(coluna,y)
                        alpha60(coluna,y)
                        alpha40(coluna,y)
                        alpha20(coluna,y)
                        alpha0(coluna,y)
                    break;
                    case totalLinhas+1:
                        alpha60(coluna,y)
                        alpha40(coluna,y)
                        alpha20(coluna,y)
                        alpha0(coluna,y)
                    break;
                    case totalLinhas+2:
                        alpha40(coluna,y)
                        alpha20(coluna,y)
                        alpha0(coluna,y)
                    break;
                    case totalLinhas+3:
                        alpha20(coluna,y)
                        alpha0(coluna,y)
                    break;
                    case totalLinhas+4:
                        alpha0(coluna,y)
                    break;
                    default:
                        alpha100(coluna,y)
                        alpha80(coluna,y)
                        alpha60(coluna,y)
                        alpha40(coluna,y)
                        alpha20(coluna,y)
                        alpha0(coluna,y)
                }         
                y++         
                if (y >= totalLinhas+5) {
                    clearInterval(blabla)
                }   
            }, speed) 
        }


        const alpha100 = (indexX, indexY) => {
            document.querySelector(`#row${indexY}`).children[indexX].className = "alpha100"
        }
        const alpha80 = (indexX, indexY) => {
            document.querySelector(`#row${indexY-1}`).children[indexX].className = "alpha80"
        }
        const alpha60 = (indexX, indexY) => {
            document.querySelector(`#row${indexY-2}`).children[indexX].className = "alpha60"
        }
        const alpha40 = (indexX, indexY) => {
            document.querySelector(`#row${indexY-3}`).children[indexX].className = "alpha40"
        }
        const alpha20 = (indexX, indexY) => {
            document.querySelector(`#row${indexY-4}`).children[indexX].className = "alpha20"
        }
        const alpha0 = (indexX, indexY) => {
            document.querySelector(`#row${indexY-5}`).children[indexX].className = ""
        }
               
        setInterval(() => {
            var x = Math.floor(Math.random()* totalColunas)
            column(x)
        }, delay) 
        
    </script>
  <style>
    body { 
        background-color: black;
    }
    table {
        border: 0
    }
    table tr td {
        width: 20px;
        height: 20px;
        background-color: #00ff00;
        opacity: 0;
    }
    .alpha100 {
        opacity: 1;
    }
    .alpha80 {
        opacity: 0.8;
    }
    .alpha60 {
        opacity: 0.6;
    }
    .alpha40 {
        opacity: 0.4;
    }
    .alpha20 {
        opacity: 0.2;
    }
  </style>
    
</html>
